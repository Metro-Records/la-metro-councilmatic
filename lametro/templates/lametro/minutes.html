{% extends "base_with_margins.html" %}
{% load staticfiles %}
{% block title %}Minutes{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/jquery-ui.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap-datetimepicker.min.css' %}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
{% endblock %}

{% block content %}
  {% include 'partials/banner.html' %}
  <div class="row-fluid">
    <div class="col-sm-9 no-pad-mobile">
      <br/><br class="non-mobile-only"/>
      <div id="minutes-form" class="row">
        <div class="col-xs-8">
          <form action='/minutes' method='GET'>
            <div class="input-group" id='date-search'>
              <span class="input-group-addon" id="sizing-addon3"><i class="fa fa-calendar" aria-hidden="true"></i></span>
              <input type="text" id="minutes-from" name="minutes-from" class="form-control date-filter" placeholder="Select start date..." value='{{ start_date }}'>
              <input type="text" id="minutes-to" name="minutes-to" class="form-control date-filter" placeholder="Select end date..." value='{{ end_date }}'>
              <span class="input-group-btn">
                <button class="btn btn-default btn-date" id="minutes-search" type="submit"><i class="fa fa-search" aria-hidden="true"></i> <span class='hidden-sm hidden-xs'>Search</span></button>
              </span>
            </div>
          </form>
        </div>
        <div class="col-xs-2">
          <a href="{% url 'lametro:minutes' %}?show=all" class="btn btn-salmon d-inline-block"><i class="fa fa-list" aria-hidden="true"></i><span class="hidden-xs"> All minutes</span></a>
        </div>
        <div class="col-xs-2">
          <a href="{% url 'lametro:minutes' %}" class="btn btn-teal d-inline-block"><i class="fa fa-repeat" aria-hidden="true"></i><span class="hidden-xs"> Reset</span></a>
        </div>
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-sm-9 no-pad-mobile">
      <br/><br class="non-mobile-only"/>
      <div id="minutes-list">
        <h2><span>Minutes</span></h2>
        {% for date, minutes_list in all_minutes %}
        <div class="minutes-listing">
          <h5 class="text-default">
            <i class="fa fa-fw fa-calendar-o"></i> {{ date | date:"D m/d/Y"}}
            <div class="divider"></div>
          </h5>
          {% for e in minutes_list %}
            {% include 'partials/minutes_item.html' %}
          {% endfor %}
        </div>
        {% endfor %}
        <a href="" class="btn btn-salmon" id="more-minutes"><i class="fa fa-fw fa-chevron-down"></i>Show all minutes</a>
        <a href="" class="btn btn-salmon" id="fewer-minutes"><i class="fa fa-fw fa-chevron-up"></i>Show fewer minutes</a>
      </div>
    </div>
  </div>
{% endblock %}

{% if forloop.last %}
<div class="row" style="margin-bottom: 30px;">
{% else %}
<div class="row">
{% endif %}


{% block extra_js %}
  <script src="{% static 'js/jquery-1.10.1.min.js' %}"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <script type="{% static 'js/moment.js' %}"></script>
  <script type="{% static 'js/bootstrap-datetimepicker.js' %}"></script>
  <script>
    $(document).ready(function() {

      $('#minutes-from').datepicker();
      $('#minutes-to').datepicker();

      function collapseMinutes(e){
        $(".minutes-listing:gt(10)").hide();
        $("#more-minutes").show();
        $("#fewer-minutes").hide();
      }
      function expandMinutes(e){
        $(".minutes-listing:gt(10)").show();
        $("#more-minutes").hide();
        $("#fewer-minutes").show();
      }

      collapseMinutes();

      $("#more-minutes").click(function() {
          expandMinutes();
          return false
      });

      $("#fewer-minutes").click(function() {
          collapseMinutes();
          return false
      });
    });
  </script>
{% endblock %}